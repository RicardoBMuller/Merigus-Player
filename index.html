<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ricardo Capel | Merigus Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #121212;
            --card-color: #181818;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --accent-color: #1db954; /* Verde Spotify */
            --accent-hover: #1ed760;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Circular Std', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Evita barras de rolagem */
        }

        /* Fundo animado sutil */
        body::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle, rgba(29,185,84,0.1) 0%, rgba(18,18,18,0) 60%);
            animation: pulse 15s infinite alternate;
            z-index: -1;
        }

        @keyframes pulse {
            0% { transform: translate(-5%, -5%) scale(1); }
            100% { transform: translate(5%, 5%) scale(1.1); }
        }

        .player-container {
            background-color: var(--card-color);
            width: 360px;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            transition: transform 0.3s ease;
        }

        /* Área da Capa */
        .cover-area {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.5);
            margin-bottom: 25px;
            position: relative;
            background-color: #333;
        }

        .cover-area img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .playing .cover-area img {
            transform: scale(1.05);
        }

        /* Informações da Música */
        .song-info {
            text-align: left;
            margin-bottom: 20px;
        }

        .song-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .artist-name {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Barra de Progresso */
        .progress-area {
            height: 5px;
            width: 100%;
            background: #4f4f4f;
            border-radius: 50px;
            cursor: pointer;
            margin-bottom: 8px;
            transition: height 0.2s;
        }

        .progress-area:hover {
            height: 8px; /* Fica mais grossa ao passar o mouse */
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--text-primary);
            border-radius: 50px;
            position: relative;
            transition: width 0.1s linear;
        }

        .playing .progress-bar {
            background: var(--accent-color);
        }

        /* Bolinha do scrubber */
        .progress-bar::after {
            content: '';
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .progress-area:hover .progress-bar::after {
            opacity: 1;
        }

        .timers {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
        }

        /* Controles */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
        }

        .btn {
            background: none;
            border: none;
            color: var(--text-secondary); /* Cor padrão cinza */
            font-size: 1.1rem;
            cursor: pointer;
            transition: color 0.2s, transform 0.1s;
            position: relative;
        }

        .btn:hover {
            color: var(--text-primary);
        }

        .btn:active {
            transform: scale(0.9);
        }

        /* Estado Ativo (para Shuffle e Repeat) */
        .btn.active {
            color: var(--accent-color); /* Fica verde quando ativo */
        }
        
        /* Ponto indicador embaixo do botão ativo (estilo Spotify) */
        .btn.active::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background-color: var(--accent-color);
            border-radius: 50%;
        }

        /* Botão Play/Pause maior */
        .btn-main {
            width: 55px;
            height: 55px;
            background-color: var(--text-primary);
            color: #000; /* Ícone preto */
            border-radius: 50%;
            font-size: 1.4rem;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s, background-color 0.2s;
        }

        .btn-main:hover {
            transform: scale(1.05);
            background-color: var(--accent-hover);
            color: #000; /* Garante que o ícone fique preto no hover */
        }
        
        .btn-main:active {
             transform: scale(0.95);
        }

    </style>
</head>
<body>

<div class="player-container" id="player">
    <div class="cover-area">
        <img src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1000&auto=format&fit=crop" alt="Capa do Álbum" id="cover">
    </div>

    <div class="song-info">
        <h2 class="song-title" id="title">Carregando...</h2>
        <p class="artist-name" id="artist">Ricardo Capel</p>
    </div>

    <div class="progress-area" id="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="timers">
        <span id="current-time">0:00</span>
        <span id="duration">0:00</span>
    </div>

    <div class="controls">
        <button class="btn" id="shuffle" title="Aleatório"><i class="fas fa-shuffle"></i></button>
        
        <button class="btn" id="prev" title="Anterior"><i class="fas fa-step-backward"></i></button>
        
        <button class="btn btn-main" id="play" title="Tocar/Pausar"><i class="fas fa-play"></i></button>
        
        <button class="btn" id="next" title="Próxima"><i class="fas fa-step-forward"></i></button>
        
        <button class="btn" id="repeat" title="Repetir"><i class="fas fa-repeat"></i></button>
    </div>
</div>

<audio id="audio"></audio>

<script>
    // --- LISTA DE MÚSICAS ---
    // ATENÇÃO: Verifique se os nomes dos arquivos e caminhos estão corretos
    const songs = [
        {
            "title": "I Walk The Shadows... Of A Sunless Day (V1)",
            "artist": "Ricardo Capel",
            "src": "musicas/I walk the shadows... of a sunless day (V1).mp3",
            "cover": "musicas/capa_shadows.jpg" 
        },
        {
            "title": "I Walk The Shadows... Of A Sunless Day (V2)",
            "artist": "Ricardo Capel",
            "src": "musicas/I walk the shadows... of a sunless day (V2).mp3",
            "cover": "musicas/capa_shadows.jpg"
        },
        {
            "title": "The Pain Is Real (V1)",
            "artist": "Ricardo Capel",
            "src": "musicas/The pain is real (V1).mp3",
            "cover": "musicas/capa_pain.jpg"
        },
        {
            "title": "The Pain Is Real (V2)",
            "artist": "Ricardo Capel",
            "src": "musicas/The pain is real (V2).mp3",
            "cover": "musicas/capa_pain.jpg"
        }
    ];

    // --- ELEMENTOS DO DOM ---
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const shuffleBtn = document.getElementById('shuffle');
    const repeatBtn = document.getElementById('repeat');
    
    const titleEl = document.getElementById('title');
    const artistEl = document.getElementById('artist');
    const coverEl = document.getElementById('cover');
    
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const currTimeEl = document.getElementById('current-time');
    const durTimeEl = document.getElementById('duration');
    const playerContainer = document.getElementById('player');

    // Imagem padrão (Dark/Metal)
    const defaultCover = "https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1000&auto=format&fit=crop";

    // --- VARIÁVEIS DE ESTADO ---
    let songIndex = 0;
    let isShuffle = false;
    let isRepeat = false; // Se true, repete a mesma música

    // Inicializar
    loadSong(songs[songIndex]);

    function loadSong(song) {
        titleEl.innerText = song.title;
        artistEl.innerText = song.artist;
        
        // Tratamento para caracteres especiais na URL
        const encodedSrc = encodeURI(song.src);
        audio.src = encodedSrc;
        
        // Carregar capa ou usar padrão
        if(song.cover && song.cover.trim() !== "") {
            coverEl.src = song.cover;
        } else {
            coverEl.src = defaultCover;
        }
    }

    function playSong() {
        playerContainer.classList.add('playing');
        playBtn.querySelector('i').classList.remove('fa-play');
        playBtn.querySelector('i').classList.add('fa-pause');
        audio.play();
    }

    function pauseSong() {
        playerContainer.classList.remove('playing');
        playBtn.querySelector('i').classList.add('fa-play');
        playBtn.querySelector('i').classList.remove('fa-pause');
        audio.pause();
    }

    // Toggle Play/Pause
    playBtn.addEventListener('click', () => {
        const isPlaying = playerContainer.classList.contains('playing');
        isPlaying ? pauseSong() : playSong();
    });

    // --- LÓGICA DE NAVEGAÇÃO ---

    function prevSong() {
        // Se estiver nos primeiros 3 segundos, reinicia a música (igual Spotify)
        if(audio.currentTime > 3) {
            audio.currentTime = 0;
            return;
        }
        
        if (isShuffle) {
            playRandomSong();
        } else {
            songIndex--;
            if (songIndex < 0) songIndex = songs.length - 1;
            loadSong(songs[songIndex]);
            playSong();
        }
    }

    function nextSong() {
        if (isShuffle) {
            playRandomSong();
        } else {
            songIndex++;
            if (songIndex > songs.length - 1) songIndex = 0;
            loadSong(songs[songIndex]);
            playSong();
        }
    }

    // Função auxiliar para Aleatório
    function playRandomSong() {
        let newIndex;
        // Garante que a próxima música não seja a mesma atual (se houver mais de 1 música)
        do {
            newIndex = Math.floor(Math.random() * songs.length);
        } while (newIndex === songIndex && songs.length > 1);
        
        songIndex = newIndex;
        loadSong(songs[songIndex]);
        playSong();
    }

    prevBtn.addEventListener('click', prevSong);
    nextBtn.addEventListener('click', nextSong);

    // --- CONTROLES EXTRAS (SHUFFLE E REPEAT) ---

    shuffleBtn.addEventListener('click', () => {
        isShuffle = !isShuffle;
        // Adiciona ou remove a classe 'active' (cor verde)
        shuffleBtn.classList.toggle('active', isShuffle);
    });

    repeatBtn.addEventListener('click', () => {
        isRepeat = !isRepeat;
        repeatBtn.classList.toggle('active', isRepeat);
    });

    // --- PROGRESSO E TEMPO ---

    function updateProgress(e) {
        const { duration, currentTime } = e.srcElement;
        const progressPercent = (currentTime / duration) * 100;
        progressBar.style.width = `${progressPercent}%`;
        
        if(duration) {
            const durationMin = Math.floor(duration / 60);
            const durationSec = Math.floor(duration % 60);
            durTimeEl.innerText = `${durationMin}:${durationSec < 10 ? '0' : ''}${durationSec}`;
        }
        
        const currentMin = Math.floor(currentTime / 60);
        const currentSec = Math.floor(currentTime % 60);
        currTimeEl.innerText = `${currentMin}:${currentSec < 10 ? '0' : ''}${currentSec}`;
    }

    function setProgress(e) {
        const width = this.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        audio.currentTime = (clickX / width) * duration;
    }

    audio.addEventListener('timeupdate', updateProgress);
    progressContainer.addEventListener('click', setProgress);
    
    // --- O QUE FAZER QUANDO A MÚSICA ACABA ---
    audio.addEventListener('ended', () => {
        if (isRepeat) {
            // Se repetir estiver ligado, toca a mesma de novo
            audio.currentTime = 0;
            playSong();
        } else {
            // Se não, vai para a próxima (obedecendo o shuffle se estiver ligado)
            nextSong();
        }
    });

</script>
</body>
</html>
